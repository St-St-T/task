(self.webpackChunkyanao_site_layout=self.webpackChunkyanao_site_layout||[]).push([[328],{610:(e,t,n)=>{"use strict";var r=n(931);const o=tinymce;var a=n.n(o);const i=e=>e&&"A"===e.tagName&&"person-tooltip"===e.dataset.controller,c=["а","б","в","г","д","е","ё","ж","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","ы","э","ю","я"];const l=e=>e&&"BLOCKQUOTE"===e.tagName&&e.classList.contains("blockquote");var s=n(99),u={а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"ye",ж:"zh",з:"z",и:"i",й:"y",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"kh",ц:"ts",ч:"ch",ш:"sh",щ:"shch",ъ:"",ы:"y",ь:"",э:"e",ю:"yu",я:"ya"};const f=function(e){for(var t="",n=0;n<e.length;n++){var r=e[n];t+=r in u?u[r]:r}return t};function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var o=T(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,e);var t,n,r,o=b(a);function a(){var e;y(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return k(w(e=o.call.apply(o,[this].concat(n))),"onPublicationVisibilityChange",(function(t){t.detail?e.visibilityHintTarget.classList.remove("active"):e.visibilityHintTarget.classList.add("active")})),k(w(e),"onNewsTitleUpdate",(function(){e.symbolCodeTarget.value=f(e.newsTitleTarget.value.toLowerCase()).replace(/\s/g,"-").replace(/[^a-zA-Z0-9-_]/g,""),e.symbolCodeMask.updateValue()})),k(w(e),"onNewsTitleChange",(function(){e.symbolCodeTarget.dispatchEvent(new Event("change"))})),k(w(e),"onSubmit",(function(){var t=d(e.validate(),2),n=t[0],r=t[1];if(n)e.element.submit();else{var o=e.tabButtonTargets[r];o.click(),o.scrollIntoView({behavior:"smooth"})}})),k(w(e),"onReset",(function(){window.requestAnimationFrame((function(){for(var t=e.element.querySelectorAll(".switch__checkbox"),n=0;n<t.length;n++)t[n].dispatchEvent(new Event("change"));for(var r=e.element.querySelectorAll('[data-controller="date-time-select"] .text-field'),o=0;o<r.length;o++)r[o].dispatchEvent(new CustomEvent("reset"))}))})),e}return t=a,(n=[{key:"connect",value:function(){var e=this;this.element.addEventListener("reset",this.onReset),this.visibilitySwitchTarget.addEventListener("switch",this.onPublicationVisibilityChange),this.newsTitleTarget.addEventListener("input",this.onNewsTitleUpdate),this.newsTitleTarget.addEventListener("change",this.onNewsTitleChange),this.submitTarget.addEventListener("click",this.onSubmit),this.symbolCodeMask=new s.Z(this.symbolCodeTarget,{mask:/^[a-zA-Z0-9-_]+$/}),window.requestAnimationFrame((function(){e.visibilitySwitchTarget.classList.contains("active")||e.visibilityHintTarget.classList.add("active")}))}},{key:"disconnect",value:function(){this.element.removeEventListener("reset",this.onReset),this.visibilitySwitchTarget.removeEventListener("switch",this.onPublicationVisibilityChange),this.newsTitleTarget.removeEventListener("input",this.onNewsTitleUpdate),this.newsTitleTarget.removeEventListener("change",this.onNewsTitleChange),this.submitTarget.removeEventListener("click",this.onSubmit),this.symbolCodeMask&&this.symbolCodeMask.destroy()}},{key:"validateRequiredField",value:function(e){for(var t=e.parentElement;t&&!t.classList.contains("input-field");)t=t.parentElement;if(console.log(e.value.replace(/\s+/,"").length),e.value.replace(/\s+/,"").length)return t.classList.remove("error"),t.removeAttribute("data-error-text"),[!0,0];for(t.classList.add("error"),t.dataset.errorText=e.dataset.emptyErrorText;t&&"tabContent"!==t.dataset.adminNewsFormTarget;)t=t.parentElement;return[!1,this.tabContentTargets.indexOf(t)]}},{key:"validate",value:function(){var e=this,t=!0,n=0;return this.validatedFieldTargets.forEach((function(r){if(r.hasAttribute("data-required")){var o=d(e.validateRequiredField(r),2),a=o[0],i=o[1];t&&!a&&(t=!1,n=i)}})),[t,n]}}])&&g(t.prototype,n),r&&g(t,r),a}(r.Qr);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}k(O,"targets",["visibilitySwitch","visibilityHint","title","newsTitle","symbolCode","submit","validatedField","tabButton","tabContent"]);var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(a,e);var t,n,r,o=E(a);function a(){var e;S(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return I(_(e=o.call.apply(o,[this].concat(n))),"onChange",(function(){var t=new FormData;t.append("code",e.element.value),fetch(e.element.dataset.existenceCheckUrl,{method:"POST",body:t}).then((function(e){return e.json()})).then((function(t){return e.processData(t)}))})),e}return t=a,(n=[{key:"connect",value:function(){this.element.addEventListener("change",this.onChange)}},{key:"disconnect",value:function(){this.element.removeEventListener("change",this.onChange)}},{key:"processData",value:function(e){for(var t=this.element.parentElement;t&&!t.classList.contains("input-field");)t=t.parentElement;e.EXIST?(t.classList.add("error"),t.dataset.errorText=this.element.dataset.existenceErrorText):(t.classList.remove("error"),t.removeAttribute("data-error-text"))}}])&&C(t.prototype,n),r&&C(t,r),a}(r.Qr),x=(n(901),n(822));function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var o=V(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return H(this,n)}}function H(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?$(e):t}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(a,e);var t,n,r,o=M(a);function a(){var e;B(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return z($(e=o.call.apply(o,[this].concat(n))),"onFocus",(function(e){e.target.setSelectionRange(0,e.target.value.length)})),z($(e),"onChange",(function(){e.element.dispatchEvent(new CustomEvent("updateTime",{detail:"".concat(e.hoursTarget.value,":").concat(e.minutesTarget.value)}))})),z($(e),"onSetTime",(function(t){var n=F(t.detail.split(":"),2),r=n[0],o=n[1];e.hoursTarget.value=r,e.minutesTarget.value=o})),e}return t=a,(n=[{key:"connect",value:function(){this.hourMask=(0,s.Z)(this.hoursTarget,{mask:x.Z,from:0,to:23,lazy:!1,placeholderChar:"0",positionCaretOnTab:!1}),this.minutesMask=(0,s.Z)(this.minutesTarget,{mask:x.Z,from:0,to:59,lazy:!1,placeholderChar:"0"}),this.hoursTarget.addEventListener("focus",this.onFocus),this.hoursTarget.addEventListener("change",this.onChange),this.minutesTarget.addEventListener("focus",this.onFocus),this.minutesTarget.addEventListener("change",this.onChange),this.element.addEventListener("setTime",this.onSetTime)}},{key:"disconnect",value:function(){this.hourMask&&this.hourMask.destroy(),this.minutesMask&&this.minutesMask.destroy(),this.hoursTarget.removeEventListener("focus",this.onFocus),this.hoursTarget.removeEventListener("change",this.onChange),this.minutesTarget.removeEventListener("focus",this.onFocus),this.minutesTarget.removeEventListener("change",this.onChange),this.element.removeEventListener("setTime",this.onSetTime)}}])&&U(t.prototype,n),r&&U(t,r),a}(r.Qr);z(W,"targets",["hours","minutes"]);var Z=n(872);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t,n){return(K="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ne(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ne(e);if(t){var o=ne(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ee(this,n)}}function ee(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?te(e):t}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(a,e);var t,n,r,o=J(a);function a(){var e;Q(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return re(te(e=o.call.apply(o,[this].concat(n))),"initialDate",null),re(te(e),"initialTime",null),re(te(e),"preselectedTimeString","00:00"),re(te(e),"clear",(function(){e.preselectedTimeString="00:00",e.preselectedDateString="",e.picker.clearSelection(),e.picker.gotoDate(new Date),e.setTime(e.preselectedTimeString),e.inputTarget.value=""})),re(te(e),"onDatePreselect",(function(t){var n=t.getDate(),r=t.getMonth()+1,o=t.getFullYear();n=n<10?"0".concat(n):n,r=r<10?"0".concat(r):r;var a="".concat(n,".").concat(r,".").concat(o);e.preselectedDateString=a})),re(te(e),"onCalendarRerender",(function(){e.preselectedDateString&&(e.inputTarget.value="".concat(e.preselectedDateString," ").concat(e.preselectedTimeString))})),re(te(e),"onUpdateTime",(function(t){e.preselectedTimeString=t.detail,e.onCalendarRerender()})),re(te(e),"onKeyUp",(function(t){"Backspace"!==t.code&&"Delete"!==t.code||e.clear()})),re(te(e),"onReset",(function(){e.preselectedTimeString="00:00",e.preselectedDateString="",e.parseDefaultValue(e.inputTarget.value),e.picker.clearSelection()})),e}return t=a,(n=[{key:"connect",value:function(){var e=this,t=this.inputTarget.value;if(t.length&&this.parseDefaultValue(t),K(ne(a.prototype),"connect",this).call(this),this.mask&&this.mask.destroy(),this.mask=new s.Z(this.inputTarget,{mask:"DATE{ }`TIME",blocks:{DATE:{mask:Date,blocks:{d:{mask:s.Z.MaskedRange,placeholderChar:"Д",from:1,to:31,maxLength:2},m:{mask:s.Z.MaskedRange,placeholderChar:"М",from:1,to:12,maxLength:2},Y:{mask:s.Z.MaskedRange,placeholderChar:"Г",from:1900,to:2999,maxLength:4}}},TIME:{mask:"H:M",blocks:{H:{mask:s.Z.MaskedRange,placeholderChar:"Ч",from:0,to:23,maxLength:2},M:{mask:s.Z.MaskedRange,placeholderChar:"М",from:0,to:59,maxLength:2}}}}}),this.picker.setOptions({singleMode:!0}),this.picker.on("render",this.onCalendarRerender),this.timePickerTarget.addEventListener("updateTime",this.onUpdateTime),this.initialDate&&this.initialTime){var n=new Date(this.initialDate);this.picker.setDate(n),this.picker.gotoDate(n),window.requestAnimationFrame((function(){return e.setTime(e.initialTime)}))}this.inputTarget.addEventListener("keyup",this.onKeyUp),this.inputTarget.addEventListener("reset",this.onReset)}},{key:"disconnect",value:function(){K(ne(a.prototype),"disconnect",this).call(this),this.timePickerTarget.removeEventListener("updateTime",this.onUpdateTime),this.inputTarget.removeEventListener("keyup",this.onKeyUp),this.inputTarget.removeEventListener("reset",this.onReset)}},{key:"parseDefaultValue",value:function(e){var t=e.match(/(\d{2})\.(\d{2}).(\d{4})\s*(\d{2}):(\d{2})/);t&&(this.initialDate="".concat(t[3],"-").concat(t[2],"-").concat(t[1]),this.initialTime="".concat(t[4],":").concat(t[5]),this.preselectedDateString="".concat(t[1],".").concat(t[2],".").concat(t[3]),this.preselectedTimeString=this.initialTime)}},{key:"setTime",value:function(e){this.timePickerTarget.dispatchEvent(new CustomEvent("setTime",{detail:e}))}}])&&Y(t.prototype,n),r&&Y(t,r),a}(Z.t$);function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pe(e);if(t){var o=pe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ue(this,n)}}function ue(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?fe(e):t}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}re(oe,"targets",["input","container","button","timePicker"]);var me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(a,e);var t,n,r,o=se(a);function a(){var e;ie(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return de(fe(e=o.call.apply(o,[this].concat(n))),"onAdd",(function(){var t=e.rowTarget.cloneNode(!0),n=t.querySelector('[data-select-target="input"]'),r=t.querySelector('[data-select-target="value"]'),o=t.querySelector('[data-select-target="list"] .active');o&&(n.value="",r.value="",o.classList.remove("active")),e.rowTarget.parentElement.insertBefore(t,e.addTarget),e.correctLastFieldName()})),e}return t=a,(n=[{key:"connect",value:function(){this.addTarget.addEventListener("click",this.onAdd),this.correctLastFieldName()}},{key:"disconnect",value:function(){this.addTarget.removeEventListener("click",this.onAdd)}},{key:"correctLastFieldName",value:function(){var e=this.valueTargets.length-1;this.valueTargets[e].name=this.element.dataset.selectNamesTemplate.replace("%i",e)}},{key:"onDelete",value:function(e){var t=e.target.parentElement;this.rowTargets.indexOf(t)>-1&&t.parentElement.removeChild(t)}}])&&ce(t.prototype,n),r&&ce(t,r),a}(r.Qr);function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oe(e);if(t){var o=Oe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ke(this,n)}}function ke(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}de(me,"targets",["row","add","value"]);var Pe={Accessibility:"Доступность",Action:"Действие",Activity:"Деятельность","Add to Dictionary":"Добавить к словарю",Address:"Адрес",Advanced:"Дополнительные",Align:"Выровнять","Align center":"Выровнять по центру","Align left":"Выровнять по левому краю","Align right":"Выровнять по правому краю",Alignment:"Выравнивание",All:"Все","Alternative description":"Описание изображения","Alternative source":"Альтернативный источник","Alternative source URL":"URL альтернативного источника",Anchor:"Якорь","Anchor...":"Якорь...",Anchors:"Якоря","Animals and Nature":"Животные и природа",Apply:"Применить",Arrows:"Стрелки",Author:"Автор","Auto correct {0}":"Автозамена {0}",Autocorrect:"Автозамена",B:"B",Back:"Назад","Background color":"Цвет фона",Black:"Черный",Block:"Блок",Blockquote:"Блок цитирования",Blocks:"Блоки",Blue:"Синий",Body:"Тело",Bold:"Жирный шрифт",Border:"Граница","Border color":"Цвет границы","Border style":"Стиль рамки","Border width":"Ширина рамки",Bottom:"По низу",Brightness:"Яркость","Browse for an image":"Выбор изображения","Bullet list":"Маркированный список",Cancel:"Отменить",Capitalization:"Применение прописных букв",Caption:"Caption (название)","Case Change":"изменение регистра",Cell:"Ячейка","Cell padding":"Внутренний отступ ячейки","Cell properties":"Параметры ячейки","Cell spacing":"Внешний отступ ячейки","Cell styles":"Стили ячеек","Cell type":"Тип ячейки",Center:"По центру",Characters:"Символы","Characters (no spaces)":"Символы (без пробелов)",Checklist:"Контрольный список",Circle:"Кружок",Class:"Класс","Clear formatting":"Удалить форматирование",Close:"Закрыть",Code:"Код","Code sample...":"Пример кода...","Code view":"Представление кода","Color Picker":"Пипетка цвета","Color levels":"Цветовые уровни","Color swatch":"Образец цвета",Cols:"Столбцы",Column:"Столбец","Column clipboard actions":"Действия со столбцами в буфере обмена","Column group":"Группа столбцов","Column header":"Заголовок столбца","Constrain proportions":"Ограничить пропорции",Contrast:"Контраст",Copy:"Копировать","Copy column":"Копировать столбец","Copy row":"Копировать строку","Could not find the specified string.":"Заданная строка не найдена/","Could not load emoticons":"Не удалось загрузить смайлы",Count:"Подсчет",Crop:"Обрезать",Currency:"Валюта","Current window":"Текущее окно","Custom color":"Пользовательский цвет","Custom...":"Настраиваемый...",Cut:"Вырезать","Cut column":"Вырезать столбец","Cut row":"Вырезать строку","Dark Blue":"Темно-синий","Dark Gray":"Темно-серый","Dark Green":"Темно-зеленый","Dark Orange":"Темно-оранжевый","Dark Purple":"Темно-фиолетовый","Dark Red":"Темно-красный","Dark Turquoise":"Темно-бирюзовый","Dark Yellow":"Темно-желтый",Dashed:"Пунктирная граница","Date/time":"Дата/время","Decrease indent":"Уменьшить отступ",Default:"По умолчанию","Delete column":"Удалить столбец","Delete row":"Удалить строку","Delete table":"Удалить таблицу",Description:"Описание",Dimensions:"Размеры",Disc:"Точка",Div:"Div",Document:"Документ",Dotted:"Граница из точек",Double:"Двойная граница","Drop an image here":"Перетащите изображение сюда","Dropped file type is not supported":"Тип перетащенного файла не поддерживается",Edit:"Редактировать","Edit image":"Редактировать изображение",Embed:"Встроенный код","Embed iframe":"Встроить iframe",Emoticons:"Смайлики","Emoticons...":"Смайлики...",Encoding:"Кодировка",Error:"Ошибка","Error: Form submit field collision.":"Ошибка: конфликт полей отправки формы.","Error: No form element found.":"Ошибка: не найден элемент формы.","Extended Latin":"Расширенная латынь","Failed to initialize plugin: {0}":"Ошибка при инициализации плагина: {0}","Failed to load plugin url: {0}":"Ошибка при загрузке плагина по пути: {0}","Failed to load plugin: {0} from url {1}":"Ошибка при загрузке плагина: {0} по пути {1}","Failed to upload image: {0}":"Ошибка при загрузке изображения: {0}",File:"Файл",Find:"Найти","Find (if searchreplace plugin activated)":"Найти (если плагин searchreplace активирован)","Find and Replace":"Поиск и замена","Find and replace...":"Найти и заменить...","Find in selection":"Найти в выделении","Find whole words only":"Найти только целые слова",Finish:"Финский",Flags:"Флаги","Flip horizontally":"Отразить по горизонтали","Flip vertically":"Отразить по вертикали","Focus to contextual toolbar":"Фокус на контекстной панели инструментов","Focus to element path":"Фокус на элементе пути","Focus to menubar":"Фокус на панели меню","Focus to toolbar":"Фокус на панели инструментов",Font:"Шрифт","Font Sizes":"Размер шрифта",Fonts:"Шрифты","Food and Drink":"Еда и напитки",Footer:"Нижний колонтитул",Format:"Формат","Format Painter":"Форматирование по образцу",Formats:"Форматы",Fullscreen:"Полный экран",G:"G",Gamma:"Гамма",General:"Описание",Gray:"Серый",Green:"Зеленый",Groove:"Объемная граница с выемкой","Handy Shortcuts":"Горячие клавиши",Header:"Верхний колонтитул","Header cell":"Ячейка верхнего колонтитула","Heading 1":"Заголовок 1","Heading 2":"Заголовок 2","Heading 3":"Заголовок 3","Heading 4":"Заголовок 4","Heading 5":"Заголовок 5","Heading 6":"Заголовок 6",Headings:"Заголовки",Height:"Высота",Help:"Справка",Hidden:"Hidden","Horizontal align":"Выравнивание по горизонтали","Horizontal line":"Горизонтальная линия","Horizontal space":"Интервал по горизонтали",Id:"Идентификатор","Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.":"Идентификатор должен начинаться с буквы, за которой следуют только буквы, цифры, тире, точки, двоеточия или подчеркивания.",Ignore:"Игнорировать","Ignore all":"Игнорировать все","Image is decorative":"Изображение является декоративным","Image list":"Список изображений","Image options":"Настройки изображения","Image title":"Название изображения","Image...":"Изображение...","ImageProxy HTTP error: Could not find Image Proxy":"Ошибка HTTP Image Proxy: Image Proxy не найден","ImageProxy HTTP error: Incorrect Image Proxy URL":"Ошибка HTTP Image Proxy: неверный URL-адрес Image Proxy","ImageProxy HTTP error: Rejected request":"Ошибка HTTP Image Proxy: запрос отклонен","ImageProxy HTTP error: Unknown ImageProxy error":"Ошибка HTTP Image Proxy: неизвестная ошибка Image Proxy","Increase indent":"Увеличить отступ",Inline:"Встроенный",Insert:"Вставить","Insert Template":"Вставить шаблон","Insert checklist":"Вставить контрольный список","Insert column after":"Добавить пустой столбец справа","Insert column before":"Добавить пустой столбец слева","Insert date/time":"Вставить дату/время","Insert image":"Вставить изображение","Insert link (if link plugin activated)":"Вставить ссылку (если плагин link активирован)","Insert row after":"Вставить пустую строку снизу","Insert row before":"Вставить пустую строку сверху","Insert table":"Вставить таблицу","Insert template...":"Вставить шаблон...","Insert video":"Вставить видео","Insert/Edit code sample":"Добавить/Изменить пример кода","Insert/edit iframe":"Вставить/редактировать элемент iframe","Insert/edit image":"Вставить/изменить изображение","Insert/edit link":"Вставить/редактировать ссылку","Insert/edit media":"Вставить/редактировать мультимедиа","Insert/edit video":"Вставить/редактировать видео",Inset:"Вдавленная граница","Invalid hex color code: {0}":"Недопустимый шестнадцатеричный код цвета: {0}",Invert:"Инверсия",Italic:"Курсив",Justify:"Выровнять тест по ширине","Keyboard Navigation":"Управление с помощью клавиатуры",Keywords:"Ключевые слова",Language:"Language","Learn more...":"Узнать больше...",Left:"Налево","Left to right":"Слева направо","Light Blue":"Светло-синий","Light Gray":"Светло-серый","Light Green":"Светло-зеленый","Light Purple":"Светло-фиолетовый","Light Red":"Светло-красный","Light Yellow":"Светло-желтый","Line height":"Высота строки","Link list":"Список ссылок","Link...":"Ссылка...","List Properties":"Параметры списка","List properties...":"Параметры списка...","Loading emoticons...":"Загрузка смайлов...","Loading...":"Идет загрузка...","Lower Alpha":"Строчные латинские","Lower Greek":"Строчные греческие","Lower Roman":"Строчные римские","Match case":"С учетом регистра",Mathematical:"Математические","Media poster (Image URL)":"Постер мультимедиа (URL изображения)","Media...":"Мультимедиа...","Medium Blue":"Средний синий","Medium Gray":"Умеренно серый","Medium Purple":"Умеренно пурпурный","Merge cells":"Объединить ячейки","Metadata and Document Properties":"Метаданные и свойства документа",Middle:"По середине","Midnight Blue":"Черно-синий","More...":"Больше...",Name:"Имя:","Navy Blue":"Темно-синий","New document":"Новый документ","New window":"Новое окно",Next:"Продолжить",No:"Нет","No alignment":"Без выравнивания","No color":"Без цвета","No misspellings found.":"Орфографических ошибок не найдено.","Nonbreaking space":"Неразрывный пробел",None:"Нет","Numbered list":"Нумерованный список",OR:"OR",Objects:"Объекты",Ok:"OK","Open help dialog":"Открыть справку","Open link":"Открыть ссылку","Open link in...":"Открыть ссылку в...","Open popup menu for split buttons":"Открыть всплывающее меню для разделенных кнопок",Orange:"Оранжевый",Orientation:"Ориентация",Outset:"Выдавленная граница","Page Embed":"вставка страницы","Page break":"Разрыв страницы",Paragraph:"Абзац",Paste:"Вставить","Paste as text":"Вставить как текст","Paste column after":"Вставить столбец справа","Paste column before":"Вставить столбец слева","Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":"Вставка теперь выполняется в виде обычного текста. Пока вы не отключите эту опцию, содержимое будет вставляться как обычный текст.","Paste or type a link":"Введите или вставьте ссылку","Paste row after":"Вставить строку снизу","Paste row before":"Вставить строку сверху","Paste your embed code below:":"Вставьте встроенный код ниже:",People:"Люди","Permanent Pen Properties":"Свойства перманентного пера","Permanent pen":"постоянное перо","Permanent pen properties...":"Свойства перманентного пера...",Plugins:"Плагины","Plugins installed ({0}):":"Установленные плагины ({0}):","Powered by {0}":"При поддержке {0}",Pre:"Pre",Preferences:"Предпочтения",Preformatted:"Предварительно форматированный","Premium plugins:":"Премиум плагины:",Preview:"Предварительный просмотр",Previous:"Предыдущий",Print:"Печать","Print...":"Напечатать...",Purple:"Розовый",Quotations:"Цитаты",R:"R",Red:"Красный",Redo:"Вернуть",Remove:"Удалить","Remove color":"Удалить цвет","Remove link":"Удалить ссылку",Replace:"Заменить","Replace all":"Заменить все","Replace with":"Заменить на",Resize:"Изменить размер","Restore last draft":"Восстановить последний черновик","Rich Text Area. Press ALT-0 for help.":"Поле форматированного текста. Чтобы вызвать справку, нажмите ALT-0.","Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":"Поле форматированного текста. Чтобы вызвать меню, нажмите ALT-F9. Чтобы вызвать панель инструментов, нажмите ALT-F10. Чтобы вызвать справку, нажмите ALT-0.",Ridge:"Объемная граница с толстой кромкой",Right:"По правому краю","Right to left":"Справа налево",Robots:"Robots","Rotate clockwise":"Повернуть по часовой стрелке","Rotate counterclockwise":"Повернуть против часовой стрелки",Row:"Строка","Row clipboard actions":"Действия со строками в буфере обмена","Row group":"Группа строк","Row header":"Заголовок строки","Row properties":"Параметры строки","Row type":"Тип строки",Rows:"Строки",Save:"Сохранить","Save (if save plugin activated)":"Сохранить (если плагин save активирован)",Scope:"Область действия",Search:"Поиск","Select all":"Выделить все","Select...":"Выбрать...",Selection:"Выбор",Sharpen:"Четкость",Shortcut:"Быстрая клавиша","Show blocks":"Показывать блоки","Show caption":"Показать подпись","Show invisible characters":"Показывать невидимые символы",Size:"Размер",Solid:"Сплошная граница",Source:"Путь","Source code":"Исходный код","Special Character":"Специальный символ","Special character...":"Спец. символы...",Spellcheck:"Проверка орфографии","Spellcheck Language":"Проверка правописания","Split cell":"Разбить ячейку",Square:"Квадрат","Start list at number":"Начать нумерацию списка с цифры",Strikethrough:"Зачеркивание",Style:"Стиль",Subscript:"Подстрочный",Superscript:"Надстрочный","Switch to or from fullscreen mode":"Переключить полноэкранный режим",Symbols:"Символы","System Font":"Системный шрифт",Table:"Таблица","Table caption":"Заголовок таблицы","Table of Contents":"Содержание","Table properties":"Свойства таблицы","Table styles":"Стили таблиц",Template:"Шаблон",Templates:"Шаблоны",Text:"Текст","Text color":"Цвет текста","Text to display":"Отображаемый текст","The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?":"Введенный вами URL-адрес похож на адрес электронной почты. Хотите добавить необходимый префикс mailto:?","The URL you entered seems to be an external link. Do you want to add the required http:// prefix?":"Введенный вами URL-адрес похож на адрес внешней ссылки. Хотите добавить необходимый префикс http://?","The URL you entered seems to be an external link. Do you want to add the required https:// prefix?":"Введенный вами URL-адрес похож на адрес внешней ссылки. Хотите добавить необходимый префикс https://?",Title:"Заголовок","Title Case":"Регистр названия","To open the popup, press Shift+Enter":"Чтобы открыть всплывающее окно, нажмите Shift+Enter",Tools:"Инструменты",Top:"По верху","Travel and Places":"Путешествия и места",Turquoise:"Бирюзовый",UPPERCASE:"ВЕРХНИЙ РЕГИСТР",Underline:"Подчеркивание",Undo:"Отменить",Update:"Обновить",Upload:"Загрузить","Uploading image":"Передача изображения","Upper Alpha":"Заглавные латинские","Upper Roman":"Прописные римские",Url:"URL-адрес","User Defined":"Определяемые пользователем",Valid:"Валидный",Version:"Версия","Vertical align":"Выравнивание по вертикали","Vertical space":"Интервал по вертикали",View:"Вид","Visual aids":"Визуальные подсказки",Warn:"Предупреждение",White:"Белый",Width:"Ширина","Word count":"Количество слов",Words:"Слова","Words: {0}":"Количество слов: {0}",Yellow:"Желтый",Yes:"Да","You are using {0}":"Вы используете {0}","You have unsaved changes are you sure you want to navigate away?":"У вас есть несохраненные изменения. Вы уверены, что хотите выйти?","Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":"Ваш браузер не поддерживает прямой доступ к буферу обмена. Используйте сочетания клавиш Ctrl+X/C/V.","Zoom in":"Приблизить","Zoom out":"Отдалить",alignment:"выравнивание","austral sign":"Символ аустрала","cedi sign":"Символ седи","colon sign":"Двоеточие",comments:"комментарии","cruzeiro sign":"Символ крузейро","currency sign":"Символ валюты","dollar sign":"Символ доллара","dong sign":"Символ донга","drachma sign":"Символ драхмы","euro-currency sign":"Символ евро",example:"пример",formatting:"форматирование","french franc sign":"Символ французского франка","german penny symbol":"символ пфеннига","guarani sign":"Символ гуарани",history:"история","hryvnia sign":"Символ гривни",indentation:"отступ","indian rupee sign":"Символ индийской рупии","kip sign":"Символ кипы","lira sign":"Символ лиры","livre tournois sign":"Символ ливры",lowercase:"нижний регистр","manat sign":"Символ маната","mill sign":"Символ десятой части цента","naira sign":"Символ найры","new sheqel sign":"Символ шекеля","nordic mark sign":"Символ марки","peseta sign":"Символ песеты","peso sign":"Символ песо","ruble sign":"Символ рубля","rupee sign":"Символ рупии","spesmilo sign":"Символ спесмило",styles:"стили","tenge sign":"Символ теньге","tugrik sign":"Символ тугрика","turkish lira sign":"Символ турецкой лиры","won sign":"Символ воны","yen character":"символ иены","yen/yuan character variant one":"символ иены/юаня, вариант 1","yuan character":"символ юаня","yuan character, in hong kong and taiwan":"Символ юаня, Гонконг и Тайвань","{0} characters":"Символов: {0}","{0} words":"Слов: {0}"},Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(i,e);var t,n,r,o=Te(i);function i(){return be(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"connect",value:function(){var e=this,t=Object.keys(this.element.dataset),n={},r=window.innerHeight*(2/3),o=r<500?500:r;t.forEach((function(t){if("controller"!==t){var r=e.element.dataset[t],o=r;Number.isNaN(parseInt(r,10))?"true"===r?o=!0:"false"===r&&(o=!1):o=parseInt(r,10),n[t]=o}})),a().addI18n("ru",Pe),a().init(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){he(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({target:this.element,max_height:o},n)).then((function(t){e.editor=t.find((function(t){return t.targetElm===e.element}))}))}},{key:"disconnect",value:function(){this.editor&&this.editor.remove()}}])&&ve(t.prototype,n),r&&ve(t,r),i}(r.Qr);function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t,n){return(Le="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=De(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=De(e);if(t){var o=De(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ie(this,n)}}function Ie(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xe,Ae,Fe,Ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(a,e);var t,n,r,o=je(a);function a(){return Re(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"connect",value:function(){Le(De(a.prototype),"connect",this).call(this),this.inputTarget.accept=this.element.dataset.accept}},{key:"processFiles",value:function(e){Le(De(a.prototype),"processFiles",this).call(this,e),e&&e.length&&(this.imageTarget.style.backgroundImage="url(".concat(URL.createObjectURL(e[0]),")"),this.useExistingImageTarget.value="false")}},{key:"removeImage",value:function(){this.processFiles(),this.inputTarget.value="",this.imageTarget.style.backgroundImage="",this.useExistingImageTarget.value="false"}}])&&Ee(t.prototype,n),r&&Ee(t,r),a}(Z.Y0);function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t,n){return(Me="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=We(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=We(e);if(t){var o=We(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ve(this,n)}}function Ve(e,t){return!t||"object"!==Be(t)&&"function"!=typeof t?ze(e):t}function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Fe=["label","input","image","useExistingImage"],(Ae="targets")in(xe=Ne)?Object.defineProperty(xe,Ae,{value:Fe,enumerable:!0,configurable:!0,writable:!0}):xe[Ae]=Fe;var Ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(a,e);var t,n,r,o=$e(a);function a(){var e;Ue(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ze(ze(e=o.call.apply(o,[this].concat(n))),"stopPropagation",(function(e){return e.stopPropagation()})),Ze(ze(e),"renameInputs",(function(){for(var t=e.element.dataset.imageNamesTemplate,n=e.element.dataset.imageDescriptionsTemplate,r=0,o=0;o<e.uploadedImageTargets.length;o++){var a=e.uploadedImageTargets[o],i=e.uploadedImageDescriptionTargets[o];a.value&&(a.name=t.replace("%i",r),i.name=n.replace("%i",r),r++)}})),Ze(ze(e),"onFileUploadError",(function(e,t){e.classList.add("error"),console.log(t)})),Ze(ze(e),"onFileUploaded",(function(t,n,r){if(200===n)try{var o=JSON.parse(r);e.findImageHiddenInput(t).value=o.id,e.findImage(t).style.backgroundImage="url(".concat(o.url,")")}catch(n){e.onFileUploadError(t,n)}else e.onFileUploadError(t,r);t.classList.remove("uploading"),e.renameInputs()})),e}return t=a,(n=[{key:"connect",value:function(){Me(We(a.prototype),"connect",this).call(this),this.imageWrapperTemplateTarget.style.display="none",this.inputTarget.accept=this.element.dataset.accept,this.inputTarget.multiple=!0,this.uploadEndpoint=this.element.dataset.uploadEndpoint,this.imagesContainerTarget.addEventListener("dragenter",this.stopPropagation),this.imagesContainerTarget.addEventListener("dragleave",this.stopPropagation),this.imagesContainerTarget.addEventListener("orderchange",this.renameInputs)}},{key:"disconnect",value:function(){this.imagesContainerTarget.removeEventListener("dragenter",this.stopPropagation),this.imagesContainerTarget.removeEventListener("dragleave",this.stopPropagation),this.imagesContainerTarget.removeEventListener("orderchange",this.renameInputs)}},{key:"uploadFile",value:function(e,t){var n=new FormData;n.append("FILE",e);var r=new XMLHttpRequest;r.onloadend=function(){return t(r.status,r.response)},r.upload.onprogress=this.onFileUploading,r.open("POST",this.uploadEndpoint),r.send(n)}},{key:"createImageWrapper",value:function(e){var t=this.imageWrapperTemplateTarget.cloneNode(!0);t.style.display="",t.dataset.multipleImageUploadTarget="imageWrapper";for(var n=t.querySelectorAll("[data-multiple-image-upload-target]"),r=0;r<n.length;r++){var o=n[r];o.dataset.multipleImageUploadTarget=o.dataset.multipleImageUploadTarget.slice(0,-1)}return this.findImage(t).style.backgroundImage="url(".concat(URL.createObjectURL(e),")"),this.imagesContainerTarget.appendChild(t),t.classList.add("uploading"),t}},{key:"findImage",value:function(e){return e.querySelector('[data-multiple-image-upload-target="image"]')}},{key:"findImageHiddenInput",value:function(e){return e.querySelector('[data-multiple-image-upload-target="uploadedImage"]')}},{key:"findImageDescriptionInput",value:function(e){return e.querySelector('[data-multiple-image-upload-target="uploadedImageDescription"]')}},{key:"processFiles",value:function(e){if(e&&e.length)for(var t=0;t<e.length;t++){var n=this.createImageWrapper(e[t]);this.uploadFile(e[t],this.onFileUploaded.bind(null,n))}}},{key:"removeImage",value:function(e){var t=e.target.parentElement,n=this.imageTargets.indexOf(t);if(-1!==n){var r=this.uploadedImageTargets[n];r.value&&!r.value.startsWith("deleted")&&(r.value="deleted#".concat(r.value),this.imageWrapperTargets[n].classList.add("hidden"))}}}])&&qe(t.prototype,n),r&&qe(t,r),a}(Z.Y0);function Qe(e){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nt(e);if(t){var o=nt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return et(this,n)}}function et(e,t){return!t||"object"!==Qe(t)&&"function"!=typeof t?tt(e):t}function tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ze(Ge,"targets",["label","input","image","imageWrapperTemplate","imageWrapper","imagesContainer","uploadedImage","uploadedImageDescription"]);var ot=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(a,e);var t,n,r,o=Je(a);function a(){var e;Ye(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return rt(tt(e=o.call.apply(o,[this].concat(n))),"onClick",(function(t){var n=e.element.dataset.confirmMessage;window.confirm(n)||t.preventDefault()})),e}return t=a,(n=[{key:"connect",value:function(){this.element.addEventListener("click",this.onClick)}},{key:"disconnect",value:function(){this.element.removeEventListener("click",this.onClick)}}])&&Ke(t.prototype,n),r&&Ke(t,r),a}(r.Qr);function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lt(e,t){return(lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function st(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pt(e);if(t){var o=pt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ut(this,n)}}function ut(e,t){return!t||"object"!==at(t)&&"function"!=typeof t?ft(e):t}function ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lt(e,t)}(a,e);var t,n,r,o=st(a);function a(){var e;it(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return dt(ft(e=o.call.apply(o,[this].concat(n))),"dragOverNumber",0),dt(ft(e),"currentDropTarget",null),dt(ft(e),"currentDragTarget",null),dt(ft(e),"onDragStart",(function(t){e.currentDragTarget=t.target,t.target.classList.add("dragging")})),dt(ft(e),"onDragEnd",(function(t){t.target.classList.remove("dragging"),e.currentDropTarget&&e.currentDropTarget.classList.remove("drag-over"),e.dragOverNumber=0})),dt(ft(e),"onDragOver",(function(e){e.preventDefault()})),dt(ft(e),"onDragEnter",(function(t){var n=e.findDragBlock(t.target);e.currentDropTarget&&n!==e.currentDropTarget&&e.currentDropTarget.classList.remove("drag-over"),e.currentDropTarget=n,e.dragOverNumber++,n.classList.add("drag-over")})),dt(ft(e),"onDragLeave",(function(t){e.dragOverNumber--,0===e.dragOverNumber&&e.findDragBlock(t.target).classList.remove("drag-over")})),dt(ft(e),"onDrop",(function(t){var n=e.findDragBlock(t.target),r=e.currentDragTarget.cloneNode(!0),o=n.cloneNode(!0);n.parentNode.replaceChild(r,n),e.currentDragTarget.parentNode.replaceChild(o,e.currentDragTarget),r.classList.remove("dragging"),o.classList.remove("drag-over"),e.element.dispatchEvent(new CustomEvent("orderchange"))})),e}return t=a,(n=[{key:"findDragBlock",value:function(e){for(var t=e;t;){if("block"===t.dataset.dragDropTarget)return t;t=t.parentElement}return null}}])&&ct(t.prototype,n),r&&ct(t,r),a}(r.Qr);dt(mt,"targets",["block"]),a().PluginManager.add("yanaoPersonLink",(function(e){const t=e.getParam("yanaoPersonLink_listSelector","#persons-list","string"),n=JSON.parse(document.querySelector(t).textContent),r=()=>{const t=e.selection?e.selection.getNode():null,r=e.selection?e.selection.getSel().toString():"",o=n.map(((e,t)=>({text:e.name,value:t.toString()})));let a="",l="";if(i(t)){a=t.dataset.person_id;const e=new URL(window.location),n=new URL(t.href);e.host!==n.host&&(l=t.href)}const s={};c.forEach((e=>{const t=e.toUpperCase();s[t]={text:t,value:t,icon:t,disabled:!0}})),n.forEach((e=>{s[e.name[0]].disabled=!1})),o.unshift({text:"Не выбрано",value:"-1"});const u={title:"Вставка ссылки на персону",body:{type:"panel",items:[{type:"label",label:"Фильтр по первой букве фамилии:",items:[]},{type:"collection",name:"surnameFilter"},{type:"listbox",name:"personId",label:"Должностное лицо",items:o},{type:"input",name:"externalLinkUrl",label:"Ссылка на внешний ресурс"}]},buttons:[{type:"cancel",text:"Закрыть"},{type:"submit",text:"Сохранить",primary:!0}],initialData:{personId:a,externalLinkUrl:l,surnameFilter:Object.values(s).filter((e=>!e.disabled))},onAction(e,t){const n=u.body.items.findIndex((e=>"personId"===e.name));if("surnameFilter"!==t.name||n<0)return;const r={...u.body.items[n]},a={...u};r.items=o.filter((e=>e.text.startsWith(t.value))),a.body.items[n]=r,e.redial(a)},onSubmit(o){const{personId:a,externalLinkUrl:i}=o.getData();if("-1"===a)return void(e=>{if(e.close(),!t)return;const n=document.createTextNode(t.innerText),r=t.parentElement;r.insertBefore(n,t),r.removeChild(t)})(o);const c=n[parseInt(a,10)],l=(e=>{const[t="",n="",r=""]=e.split(/\s+/);return{firstName:n,lastName:t,patronymic:r}})(c.name),s=t&&r?r:`${l.firstName} ${l.patronymic}`;e.insertContent(`<a\n href="${i.length?i:c.page_url}"\n target="_blank"\n data-controller="person-tooltip"\n data-person_id="${a}"\n rel="noopener noreferrer"\n contenteditable="false"\n>${s}<span class="hint-popup__person" data-person-tooltip-target="tooltip">\n  <img class="hint-popup__person-image" src="${c.photo_url}" alt="${c.name}">\n  <span class="hint-popup__person-info">\n    <span class="hint-popup__person-name">\n      <span class="hint-popup__person-surname">\n        ${l.lastName}\n      </span>\n      ${l.firstName} ${l.patronymic}\n    </span>\n    <span class="hint-popup__person-title">\n      ${c.occupation}\n    </span>\n  </span>\n</span></a>`,{format:"raw"}),o.close()}};e.windowManager.open(u)};return e.ui.registry.addToggleButton("yanaoPersonLink",{icon:"user",tooltip:"Вставить ссылку на персону",onAction:r,onSetup(t){const n=()=>{t.setActive((e=>{const t=e.selection.getStart();return e.dom.is(t,'a[data-controller="person-tooltip"]')})(e))};return e.on("NodeChange",n),()=>e.off("NodeChange",n)}}),e.on("dblclick",(t=>{let n=t.target;for(;n&&n!==e.editorContainer;){if(i(n))return void r();n=n.parentElement}})),{getMetadata:()=>({name:"Вставка ссылки на персону (ЯНАО)",url:"mailto:hello@make.st"})}})),a().PluginManager.add("yanaoQuote",(function(e){const t=()=>{const t=e.selection?e.selection.getNode():null;let n="",r="",o="",a="";if(l(t)){n=t.querySelector(".blockquote__text").textContent.trim();const e=t.querySelector(".blockquote__person-name");if(e){const n=e.childNodes;for(let e=0;e<n.length;e++)if(n[e].nodeType===Node.TEXT_NODE){o=n[e].nodeValue.trim();break}const a=t.querySelector(".blockquote__person-surname");a&&(r=a.textContent.trim())}const i=t.querySelector(".blockquote__person-title");i&&(a=i.textContent.trim())}e.windowManager.open({title:"Вставка цитаты",body:{type:"panel",items:[{type:"textarea",name:"quote",label:"Текст цитаты"},{type:"input",name:"firstNamePatronymic",label:"Имя Отчество",placeholder:"Иван Иванович"},{type:"input",name:"lastName",label:"Фамилия",placeholder:"Иванов"},{type:"input",name:"occupation",label:"Занимаемая должность"}]},buttons:[{type:"cancel",text:"Закрыть"},{type:"submit",text:"Сохранить",primary:!0}],initialData:{quote:n,lastName:r,firstNamePatronymic:o,occupation:a},onSubmit(t){const{lastName:n,firstNamePatronymic:r,occupation:o,quote:a}=t.getData();if(!a)return void e.windowManager.alert("Пожалуйста, введите текст цитаты",(()=>{t.focus("quote")}));const i=r||n||o?`<span class="blockquote__description">\n  ${r||n?`<span class="blockquote__person-name">\n  ${r}\n  ${n?`<span class="blockquote__person-surname">${n}</span>`:""}\n</span>`:""}\n  ${o?`<span class="blockquote__person-title">${o}</span>`:""}\n</span>`:"";e.insertContent(`<blockquote class="blockquote" contenteditable="false">\n  <div class="blockquote__background"></div>\n  <div class="blockquote__text">${a}</div>\n  ${i}\n</blockquote>`,{format:"raw"}),t.close()}})};return e.ui.registry.addToggleButton("yanaoQuote",{icon:"quote",tooltip:"Вставить цитату",onAction:t,onSetup(t){const n=()=>{t.setActive((e=>{const t=e.selection.getStart();return e.dom.is(t,'blockquote[class="blockquote"]')})(e))};return e.on("NodeChange",n),()=>e.off("NodeChange",n)}}),e.on("dblclick",(n=>{let r=n.target;for(;r&&r!==e.editorContainer;){if(l(r))return void t();r=r.parentElement}})),{getMetadata:()=>({name:"Вставка цитаты (ЯНАО)",url:"mailto:hello@make.st"})}}));var yt=r.Mx.start();yt.register("admin-news-form",O),yt.register("admin-symbol-code",D),yt.register("time-picker",W),yt.register("date-time-select",oe),yt.register("multiple-select",me),yt.register("tiny-mce",Se),yt.register("image-upload",Ne),yt.register("multiple-image-upload",Ge),yt.register("confirm",ot),yt.register("drag-drop",mt)},189:()=>{}},e=>{"use strict";var t=t=>e(e.s=t);t(189),t(610)}]);